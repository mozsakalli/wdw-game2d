def PROJECT_NAME = "game2d"

task build_game2d << {
        println "Building $PROJECT_NAME...\n"

        def command = "/home/wiebo/Monkey2/bin/mx2cc_linux makemods -clean -target=desktop $PROJECT_NAME"
        print "Running command: '$command'\n"

        def proc = command.execute()
        proc.in.eachLine  {line -> println line}
        proc.err.eachLine {line -> println 'ERROR: ' + line}
        proc.waitFor()

        def exitValue = proc.exitValue()
        if (exitValue != 0) {
                throw new GradleException ("Build project failed with exit code: $exitValue")
        }
}
